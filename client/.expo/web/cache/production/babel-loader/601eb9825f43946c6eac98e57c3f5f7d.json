{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from\"react\";import moment from'moment';import View from\"react-native-web/dist/exports/View\";import Platform from\"react-native-web/dist/exports/Platform\";import Text from\"react-native-web/dist/exports/Text\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import DateTimePicker from\"@react-native-community/datetimepicker\";import{timeToStr}from\"./TimeKeeper.js\";import{ButtonAll}from\"./ButtonAll\";import Emoji from\"react-native-emoji\";import{GroupCounter}from\"./GroupCounter\";import AsyncStorage from\"@react-native-async-storage/async-storage\";export var UpdateInfo=function UpdateInfo(props){var _useState=useState(\"time\"),_useState2=_slicedToArray(_useState,2),mode=_useState2[0],setMode=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],setShow=_useState4[1];var _useState5=useState(moment().format(\"hh:mm A\")),_useState6=_slicedToArray(_useState5,2),date=_useState6[0],setDate=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),numActive=_useState8[0],setNumActive=_useState8[1];var info=props.route.params.prevInfo;info=info[info.length-1];var _useState9=useState(info.numNursery),_useState10=_slicedToArray(_useState9,2),numNursery=_useState10[0],setNumNursery=_useState10[1];var _useState11=useState(info.numKangaroos),_useState12=_slicedToArray(_useState11,2),numKangaroos=_useState12[0],setNumKangaroos=_useState12[1];var _useState13=useState(info.numEmus),_useState14=_slicedToArray(_useState13,2),numEmus=_useState14[0],setNumEmus=_useState14[1];var _useState15=useState(info.numKook),_useState16=_slicedToArray(_useState15,2),numKook=_useState16[0],setNumKook=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),showPicker1=_useState18[0],setShowPicker1=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),showPicker2=_useState20[0],setShowPicker2=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),showPicker3=_useState22[0],setShowPicker3=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),showPicker4=_useState24[0],setShowPicker4=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),showTime=_useState26[0],setShowTime=_useState26[1];function storeData(newInfo){var jsonValue,item;return _regeneratorRuntime.async(function storeData$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;jsonValue=JSON.stringify(newInfo);_context.next=4;return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"childrenCount\",jsonValue));case 4:item=_context.sent;return _context.abrupt(\"return\",item);case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);alert(\"Error saving, try again\");return _context.abrupt(\"return\",_context.t0);case 12:case\"end\":return _context.stop();}}},null,null,[[0,8]],Promise);}useEffect(function(){var now=moment().format(\"hh:mm A\");setDate(now);},[]);var onSubmit=function onSubmit(){var now,newInfo,allInfo,result;return _regeneratorRuntime.async(function onSubmit$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:now=moment().format(\"hh:mm A\");newInfo={date:now,numNursery:numNursery,numKangaroos:numKangaroos,numEmus:numEmus,numKook:numKook,staffOnDuty:props.route.params.staffOnDuty};allInfo=[].concat(_toConsumableArray(props.route.params.prevInfo),[newInfo]);result=storeData(allInfo);props.navigation.goBack();case 5:case\"end\":return _context2.stop();}}},null,null,null,Promise);};var handleShow=function handleShow(currPicker){var vars=[showPicker1,showPicker2,showPicker3,showPicker4,showTime];var methods=[setShowPicker1,setShowPicker2,setShowPicker3,setShowPicker4,setShowTime];if(!vars[currPicker]&&numActive===1){return;}else if(!vars[currPicker]&&numActive===0){methods[currPicker](true);setNumActive(1);}else if(vars[currPicker]&&numActive===1){methods[currPicker](false);setNumActive(0);}};var onChange=function onChange(selectedDate){var currentDate=selectedDate||date;console.log(currentDate);setShow(Platform.OS===\"ios\");setDate(currentDate);};return React.createElement(View,{style:styles.container},React.createElement(View,null,React.createElement(Text,{style:styles.text},\"Time\"),React.createElement(View,{style:styles.form},React.createElement(View,{style:{flex:1,flexDirection:\"row\",justifyContent:\"space-between\"}},React.createElement(Text,{style:styles.text},date),React.createElement(TouchableOpacity,{onPress:function onPress(){return handleShow(4,!showTime);}},!showTime?React.createElement(Emoji,{name:\"arrow_down_small\",style:{fontSize:30}}):React.createElement(Emoji,{name:\"arrow_up_small\",style:{fontSize:30}})))),showTime?React.createElement(DateTimePicker,{testID:\"dateTimePicker\",value:date,mode:mode,iRNNumberPickers24Hour:false,display:\"default\",onChange:onChange}):null,React.createElement(Text,{style:styles.text},\"Number in nursery\"),React.createElement(View,{style:styles.form},React.createElement(View,{style:{flex:1,flexDirection:\"row\",justifyContent:\"space-between\"}},React.createElement(Text,{style:styles.text},numNursery),React.createElement(TouchableOpacity,{onPress:function onPress(){return handleShow(0,setShowPicker1);}},!showPicker1?React.createElement(Emoji,{name:\"arrow_down_small\",style:{fontSize:30}}):React.createElement(Emoji,{name:\"arrow_up_small\",style:{fontSize:30}})))),showPicker1?React.createElement(GroupCounter,{count:numNursery,setCount:setNumNursery}):null,React.createElement(Text,{style:styles.text},\"Number in kookaburra\"),React.createElement(View,{style:styles.form},React.createElement(View,{style:{flex:1,flexDirection:\"row\",justifyContent:\"space-between\"}},React.createElement(Text,{style:styles.text},numKook),React.createElement(TouchableOpacity,{onPress:function onPress(){return handleShow(1,setShowPicker2);}},!showPicker2?React.createElement(Emoji,{name:\"arrow_down_small\",style:{fontSize:30}}):React.createElement(Emoji,{name:\"arrow_up_small\",style:{fontSize:30}})))),showPicker2?React.createElement(GroupCounter,{count:numKook,setCount:setNumKook}):null,React.createElement(Text,{style:styles.text},\"Number in emus\"),React.createElement(View,{style:styles.form},React.createElement(View,{style:{flex:1,flexDirection:\"row\",justifyContent:\"space-between\"}},React.createElement(Text,{style:styles.text},numEmus),React.createElement(TouchableOpacity,{onPress:function onPress(){return handleShow(2,setShowPicker3);}},!showPicker3?React.createElement(Emoji,{name:\"arrow_down_small\",style:{fontSize:30}}):React.createElement(Emoji,{name:\"arrow_up_small\",style:{fontSize:30}})))),showPicker3?React.createElement(GroupCounter,{count:numEmus,setCount:setNumEmus}):null,React.createElement(Text,{style:styles.text},\"Number in kangaroos\"),React.createElement(View,{style:styles.form},React.createElement(View,{style:{flex:1,flexDirection:\"row\",justifyContent:\"space-between\"}},React.createElement(Text,{style:styles.text},numKangaroos),React.createElement(TouchableOpacity,{onPress:function onPress(){return handleShow(3,setShowPicker4);}},!showPicker3?React.createElement(Emoji,{name:\"arrow_down_small\",style:{fontSize:30}}):React.createElement(Emoji,{name:\"arrow_up_small\",style:{fontSize:30}})))),showPicker4?React.createElement(GroupCounter,{count:numKangaroos,setCount:setNumKangaroos}):null),React.createElement(View,null,React.createElement(ButtonAll,{handlePress:onSubmit,title:\"Save changes\"})));};var styles=StyleSheet.create({container:{padding:\"3.5%\",flex:1,backgroundColor:\"#FAFAFA\",flexDirection:\"column\",justifyContent:\"space-between\"},form:{backgroundColor:\"white\",borderRadius:5,flexDirection:\"row\"},text:{fontFamily:\"mainFont\",fontSize:20,marginBottom:\"1%\"},button:{width:\"30%\",backgroundColor:\"white\",fontFamily:\"mainFont\",borderRadius:20,marginTop:\"2%\",fontSize:20,color:\"black\",justifyContent:\"center\",textAlign:\"center\"}});","map":{"version":3,"sources":["/Users/clairelivingstone/Desktop/ratio-tracker/client/UpdateInfo.js"],"names":["React","useState","useEffect","moment","DateTimePicker","timeToStr","ButtonAll","Emoji","GroupCounter","AsyncStorage","UpdateInfo","props","mode","setMode","show","setShow","format","date","setDate","numActive","setNumActive","info","route","params","prevInfo","length","numNursery","setNumNursery","numKangaroos","setNumKangaroos","numEmus","setNumEmus","numKook","setNumKook","showPicker1","setShowPicker1","showPicker2","setShowPicker2","showPicker3","setShowPicker3","showPicker4","setShowPicker4","showTime","setShowTime","storeData","newInfo","jsonValue","JSON","stringify","setItem","item","alert","now","onSubmit","staffOnDuty","allInfo","result","navigation","goBack","handleShow","currPicker","vars","methods","onChange","selectedDate","currentDate","console","log","Platform","OS","styles","container","text","form","flex","flexDirection","justifyContent","fontSize","StyleSheet","create","padding","backgroundColor","borderRadius","fontFamily","marginBottom","button","width","marginTop","color","textAlign"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport moment from 'moment'; \n\nimport {\n  View,\n  Platform,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n} from \"react-native\";\nimport DateTimePicker from \"@react-native-community/datetimepicker\";\nimport { timeToStr } from \"./TimeKeeper.js\";\nimport { ButtonAll } from \"./ButtonAll\";\nimport Emoji from \"react-native-emoji\";\nimport {GroupCounter} from \"./GroupCounter\"\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nexport const UpdateInfo = (props) => {\n  const [mode, setMode] = useState(\"time\");\n  const [show, setShow] = useState(false);\n  const [date, setDate] = useState(moment().format(\"hh:mm A\"));\n  const [numActive, setNumActive] = useState(0);\n\n  let info = props.route.params.prevInfo;\n  info = info[info.length - 1];\n  const [numNursery, setNumNursery] = useState(info.numNursery);\n  const [numKangaroos, setNumKangaroos] = useState(info.numKangaroos);\n  const [numEmus, setNumEmus] = useState(info.numEmus);\n  const [numKook, setNumKook] = useState(info.numKook);\n  const [showPicker1, setShowPicker1] = useState(false);\n  const [showPicker2, setShowPicker2] = useState(false);\n  const [showPicker3, setShowPicker3] = useState(false);\n  const [showPicker4, setShowPicker4] = useState(false);\n  const [showTime, setShowTime] = useState(false);\n\n  // add to local storage \n\n  async function storeData(newInfo) {\n    try {\n      const jsonValue = JSON.stringify(newInfo);\n      let item = await AsyncStorage.setItem(\"childrenCount\", jsonValue);\n      return item;\n    } catch (e) {\n      alert(\"Error saving, try again\");\n      return e;\n    }\n  }\n\n  useEffect(() => {\n    var now = moment().format(\"hh:mm A\");\n    setDate(now)\n  }, [])\n\n  const onSubmit = async () => {\n    var now = moment().format(\"hh:mm A\");\n    let newInfo = {\n      date: now,\n      numNursery: numNursery,\n      numKangaroos: numKangaroos,\n      numEmus: numEmus,\n      numKook: numKook,\n      staffOnDuty: props.route.params.staffOnDuty,\n    };\n    let allInfo = [...props.route.params.prevInfo, newInfo]\n   // props.route.params.updateInfo(allInfo);\n\n    let result = storeData(allInfo)\n    props.navigation.goBack();\n\n\n    // time to save to local storage \n  };\n\n  const handleShow = (currPicker) => {\n    let vars = [showPicker1, showPicker2, showPicker3, showPicker4, showTime];\n    let methods = [\n      setShowPicker1,\n      setShowPicker2,\n      setShowPicker3,\n      setShowPicker4,\n      setShowTime,\n    ];\n\n    if (!vars[currPicker] && numActive === 1) {\n      return;\n    } else if (!vars[currPicker] && numActive === 0) {\n      methods[currPicker](true);\n      setNumActive(1);\n    } else if (vars[currPicker] && numActive === 1) {\n      methods[currPicker](false);\n      setNumActive(0);\n    }\n  };\n\n  const onChange = (selectedDate) => {\n    const currentDate = selectedDate || date;\n    console.log(currentDate);\n    setShow(Platform.OS === \"ios\");\n    setDate(currentDate);\n  };\n\n  return (\n    <View style={styles.container}>\n      <View>\n        <Text style={styles.text}>Time</Text>\n        <View style={styles.form}>\n          <View\n            style={{\n              flex: 1,\n              flexDirection: \"row\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <Text style={styles.text}>{date}</Text>\n            <TouchableOpacity onPress={() => handleShow(4, !showTime)}>\n              {!showTime ? (\n                <Emoji name=\"arrow_down_small\" style={{ fontSize: 30 }} />\n              ) : (\n                <Emoji name=\"arrow_up_small\" style={{ fontSize: 30 }} />\n              )}\n            </TouchableOpacity>\n          </View>\n        </View>\n        {showTime ? (\n          <DateTimePicker\n            testID=\"dateTimePicker\"\n            value={date}\n            mode={mode}\n            iRNNumberPickers24Hour={false}\n            display=\"default\"\n            onChange={onChange}\n          />\n        ) : null}\n\n        <Text style={styles.text}>Number in nursery</Text>\n        <View style={styles.form}>\n          <View\n            style={{\n              flex: 1,\n              flexDirection: \"row\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <Text style={styles.text}>{numNursery}</Text>\n            <TouchableOpacity onPress={() => handleShow(0, setShowPicker1)}>\n              {!showPicker1 ? (\n                <Emoji name=\"arrow_down_small\" style={{ fontSize: 30 }} />\n              ) : (\n                <Emoji name=\"arrow_up_small\" style={{ fontSize: 30 }} />\n              )}\n            </TouchableOpacity>\n          </View>\n        </View>\n        {showPicker1 ? <GroupCounter count={numNursery} setCount={setNumNursery} /> : null}\n\n\n        <Text style={styles.text}>Number in kookaburra</Text>\n        <View style={styles.form}>\n          <View\n            style={{\n              flex: 1,\n              flexDirection: \"row\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <Text style={styles.text}>{numKook}</Text>\n            <TouchableOpacity onPress={() => handleShow(1, setShowPicker2)}>\n              {!showPicker2 ? (\n                <Emoji name=\"arrow_down_small\" style={{ fontSize: 30 }} />\n              ) : (\n                <Emoji name=\"arrow_up_small\" style={{ fontSize: 30 }} />\n              )}\n            </TouchableOpacity>\n          </View>\n        </View>\n        {showPicker2 ? <GroupCounter count={numKook} setCount={setNumKook} /> : null}\n\n        <Text style={styles.text}>Number in emus</Text>\n        <View style={styles.form}>\n          <View\n            style={{\n              flex: 1,\n              flexDirection: \"row\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <Text style={styles.text}>{numEmus}</Text>\n            <TouchableOpacity onPress={() => handleShow(2, setShowPicker3)}>\n              {!showPicker3 ? (\n                <Emoji name=\"arrow_down_small\" style={{ fontSize: 30 }} />\n              ) : (\n                <Emoji name=\"arrow_up_small\" style={{ fontSize: 30 }} />\n              )}\n            </TouchableOpacity>\n          </View>\n        </View>\n        {showPicker3 ? <GroupCounter count={numEmus} setCount={setNumEmus} /> : null}\n\n        <Text style={styles.text}>Number in kangaroos</Text>\n        <View style={styles.form}>\n          <View\n            style={{\n              flex: 1,\n              flexDirection: \"row\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <Text style={styles.text}>{numKangaroos}</Text>\n            <TouchableOpacity onPress={() => handleShow(3, setShowPicker4)}>\n              {!showPicker3 ? (\n                <Emoji name=\"arrow_down_small\" style={{ fontSize: 30 }} />\n              ) : (\n                <Emoji name=\"arrow_up_small\" style={{ fontSize: 30 }} />\n              )}\n            </TouchableOpacity>\n          </View>\n        </View>\n        {showPicker4 ? <GroupCounter count={numKangaroos} setCount={setNumKangaroos} /> : null}\n      </View>\n      <View>\n        <ButtonAll handlePress={onSubmit} title={\"Save changes\"} />\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    padding: \"3.5%\",\n    flex: 1,\n    backgroundColor: \"#FAFAFA\",\n    flexDirection: \"column\",\n    justifyContent: \"space-between\",\n    \n  },\n  form: {\n    backgroundColor: \"white\",\n    borderRadius: 5,\n    flexDirection: \"row\",\n  },\n\n  text: {\n    fontFamily: \"mainFont\",\n    fontSize: 20,\n    marginBottom: \"1%\",\n  },\n\n  button: {\n    width: \"30%\",\n    backgroundColor: \"white\",\n    fontFamily: \"mainFont\",\n    borderRadius: 20,\n    marginTop: \"2%\",\n    fontSize: 20,\n    color: \"black\",\n    justifyContent: \"center\",\n    textAlign: \"center\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}