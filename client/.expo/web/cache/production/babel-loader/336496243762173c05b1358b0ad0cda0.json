{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import*as Print from\"expo-print\";import{timeToStr,dateToStr}from\"./TimeKeeper\";import{calcRatio}from\"./calcRatio\";export var print=function print(info){return _regeneratorRuntime.async(function print$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",new Promise(function(resolve,reject){info=info.slice(1);var headers=[\"Time\",\"# Nursery\",\"# Kooka\",\"# Emus\",\"# Kanga\",\"# Children\",\"# Staff\",\"# Staff req\",\"Staff initials\"];var getInfoAsStr=function getInfoAsStr(info){var time=timeToStr(info.date);var nursery=info.numNursery;var kookaburras=info.numKook;var emus=info.numEmus;var kangaroos=info.numKangaroos;var numChildren=nursery+kookaburras+emus+kangaroos;var numStaff=info.staffOnDuty.length;var staffRequired=calcRatio(nursery,kookaburras,emus+kangaroos);var staffNames=processNames(info.staffOnDuty);return\"<td>\"+time+\"</td>\\n      <td>\"+nursery+\"</td>\\n      <td>\"+kookaburras+\"</td>\\n      <td>\"+emus+\"</td>\\n      <td>\"+kangaroos+\"</td>\\n      <td>\"+numChildren+\"</td>\\n      <td>\"+numStaff+\"</td>\\n      <td>\"+staffRequired+\"</td>\\n      <td>\"+staffNames+\"</td>\";};var processNames=function processNames(staff){var initials=\"\";for(var i=0;i<staff.length;i++){initials+=staff[i].firstName[0]+\".\"+staff[i].lastName[0];if(i!=staff.length-1){initials+=\"\\n\";}}return initials;};var _Print$selectPrinterA=Print.selectPrinterAsync().catch(function(e){return console.log(\"fail\");}),printerName=_Print$selectPrinterA.printerName,printerUrl=_Print$selectPrinterA.printerUrl;var html=\"<style> body {font-family:Helvetica;} img {height: 50px; width: 250px}</style><body><img alt=\"+'kindylogo\" src=\"https://2syco449tvc32lbc983jscyx-wpengine.netdna-ssl.com/wp-content/uploads/2018/11/little-scribblers-logo.svg\"/>'+\"<br>\"+\"<h2>Ratio Check for \"+dateToStr(info[0].date)+\"</h2><table><thead><tr>\"+headers.map(function(header){return\"<th>\"+header+\"</th>\";}).join(\"\")+\"</tr></thead><tbody>\"+info.map(function(element){return\"<tr>\"+getInfoAsStr(element)+\"</tr>\";}).join(\"\")+\"</tbody></table></body>\";var _Print$printToFileAsy=Print.printToFileAsync({html:html,width:612,height:792,base64:true}),pdfURI=_Print$printToFileAsy.pdfURI,numPages=_Print$printToFileAsy.numPages,base64=_Print$printToFileAsy.base64;try{var printedFile=Print.printAsync({uri:pdfURI,html:html,width:612,height:792,printerUrl:printerUrl,orientation:Print.Orientation.portrait});resolve(printedFile);}catch(err){reject(err);}}));case 1:case\"end\":return _context.stop();}}},null,null,null,Promise);};","map":{"version":3,"sources":["/Users/clairelivingstone/Desktop/ratio-tracker/client/print.js"],"names":["Print","timeToStr","dateToStr","calcRatio","print","info","Promise","resolve","reject","slice","headers","getInfoAsStr","time","date","nursery","numNursery","kookaburras","numKook","emus","numEmus","kangaroos","numKangaroos","numChildren","numStaff","staffOnDuty","length","staffRequired","staffNames","processNames","staff","initials","i","firstName","lastName","selectPrinterAsync","catch","e","console","log","printerName","printerUrl","html","map","header","join","element","printToFileAsync","width","height","base64","pdfURI","numPages","printedFile","printAsync","uri","orientation","Orientation","portrait","err"],"mappings":"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","sourcesContent":["import * as Print from \"expo-print\";\nimport { timeToStr, dateToStr } from \"./TimeKeeper\";\nimport { calcRatio } from \"./calcRatio\";\n\nexport const print = async (info) => {\n  return new Promise((resolve, reject) =>  {\n  info = info.slice(1);\n\n  const headers = [\n    \"Time\",\n    \"# Nursery\",\n    \"# Kooka\",\n    \"# Emus\",\n    \"# Kanga\",\n    \"# Children\",\n    \"# Staff\",\n    \"# Staff req\",\n    \"Staff initials\",\n  ];\n\n  const getInfoAsStr = (info) => {\n    let time = timeToStr(info.date);\n    let nursery = info.numNursery;\n    let kookaburras = info.numKook;\n    let emus = info.numEmus;\n    let kangaroos = info.numKangaroos;\n    let numChildren = nursery + kookaburras + emus + kangaroos;\n    let numStaff = info.staffOnDuty.length;\n    let staffRequired = calcRatio(nursery, kookaburras, emus + kangaroos);\n    let staffNames = processNames(info.staffOnDuty);\n    return `<td>${time}</td>\n      <td>${nursery}</td>\n      <td>${kookaburras}</td>\n      <td>${emus}</td>\n      <td>${kangaroos}</td>\n      <td>${numChildren}</td>\n      <td>${numStaff}</td>\n      <td>${staffRequired}</td>\n      <td>${staffNames}</td>`;\n  };\n\n  const processNames = (staff) => {\n    let initials = \"\";\n    for (let i = 0; i < staff.length; i++) {\n      initials += staff[i].firstName[0] + \".\" + staff[i].lastName[0];\n      if (i != staff.length - 1) {\n        initials += \"\\n\";\n      }\n    }\n    return initials;\n  };\n\n  let { printerName, printerUrl } = Print.selectPrinterAsync().catch((e) =>\n    console.log(\"fail\")\n  );\n\n  let html =\n    \"<style> body {font-family:Helvetica;} img {height: 50px; width: 250px}</style><body><img alt=\" +\n    'kindylogo\" src=\"https://2syco449tvc32lbc983jscyx-wpengine.netdna-ssl.com/wp-content/uploads/2018/11/little-scribblers-logo.svg\"/>' +\n    \"<br>\" +\n    \"<h2>Ratio Check for \" +\n    dateToStr(info[0].date) +\n    \"</h2><table><thead><tr>\" +\n    headers.map((header) => \"<th>\" + header + \"</th>\").join(\"\") +\n    \"</tr></thead><tbody>\" +\n    info.map((element) => \"<tr>\" + getInfoAsStr(element) + \"</tr>\").join(\"\") +\n    \"</tbody></table></body>\";\n\n  let { pdfURI, numPages, base64 } = Print.printToFileAsync({\n    html: html,\n    width: 612,\n    height: 792,\n    base64: true,\n  });\n\n  try {\n    let printedFile = Print.printAsync({\n      uri: pdfURI,\n      html: html,\n      width: 612,\n      height: 792,\n      printerUrl: printerUrl,\n      orientation: Print.Orientation.portrait,\n    });\n    resolve(printedFile)\n  }\n  catch (err) {\n    reject(err)\n  }\n})\n}"]},"metadata":{},"sourceType":"module"}