{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from\"react\";import View from\"react-native-web/dist/exports/View\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import TextInput from\"react-native-web/dist/exports/TextInput\";import Emoji from\"react-native-emoji\";import AsyncStorage from\"@react-native-async-storage/async-storage\";import{FontAwesomeIcon}from\"@fortawesome/react-native-fontawesome\";import{faMinusCircle}from\"@fortawesome/free-solid-svg-icons\";import{ButtonAll}from\"./ButtonAll\";export var DiplomaInfo=function DiplomaInfo(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),inputFirstName=_useState2[0],setInputFirstName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),inputLastName=_useState4[0],setInputLastName=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),inputDiploma=_useState6[0],setInputDiploma=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),adding=_useState8[0],setAdding=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),removing=_useState10[0],setRemoving=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),staffList=_useState12[0],setStaffList=_useState12[1];var sorted=function sorted(staffObjectList){staffObjectList.sort(function(a,b){var x=a.firstName[0].toLowerCase();var y=b.firstName[0].toLowerCase();if(x<y){return-1;}if(x>y){return 1;}return 0;});return staffObjectList;};var storeData=function storeData(value){var jsonValue;return _regeneratorRuntime.async(function storeData$(_context){while(1){switch(_context.prev=_context.next){case 0:try{setStaffList(sorted(value));jsonValue=JSON.stringify(value);AsyncStorage.setItem(\"staffInfo\",jsonValue).then(setStaffList(value));}catch(e){alert(\"Error saving, try again\");}case 1:case\"end\":return _context.stop();}}},null,null,null,Promise);};useEffect(function(){var getData=function getData(){var jsonValue;return _regeneratorRuntime.async(function getData$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"staffInfo\"));case 3:jsonValue=_context2.sent;if(!(jsonValue!==null)){_context2.next=8;break;}return _context2.abrupt(\"return\",JSON.parse(jsonValue));case 8:return _context2.abrupt(\"return\",[]);case 9:_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);console.log(\"ERROR\");case 14:case\"end\":return _context2.stop();}}},null,null,[[0,11]],Promise);};getData().then(function(val){setStaffList(sorted(val));}).catch(function(e){return console.log(\"failed\");});},[]);var resetInput=function resetInput(){setInputFirstName(\"\");setInputLastName(\"\");setInputDiploma(null);};var handleRemove=function handleRemove(index){var newStaffList;return _regeneratorRuntime.async(function handleRemove$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:newStaffList=staffList.filter(function(staff){return staff!=staffList[index];});setStaffList(newStaffList);case 2:case\"end\":return _context3.stop();}}},null,null,null,Promise);};var handleAdd=function handleAdd(){var newStaffInfo,newStaffList;return _regeneratorRuntime.async(function handleAdd$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(!inputFirstName||!inputLastName||inputDiploma===null)){_context4.next=3;break;}alert(\"Invalid: Information needed (Full name and Diploma status)\");return _context4.abrupt(\"return\");case 3:newStaffInfo={firstName:inputFirstName,lastName:inputLastName,hasDiploma:inputDiploma};if(Array.isArray(staffList)&&staffList.length){newStaffList=[].concat(_toConsumableArray(staffList),[newStaffInfo]);}else{newStaffList=[newStaffInfo];}setStaffList(newStaffList);resetInput();setAdding(false);case 8:case\"end\":return _context4.stop();}}},null,null,null,Promise);};var handleSubmit=function handleSubmit(){storeData(sorted(staffList));setStaffList([]);props.navigation.goBack();};var staffToText=function staffToText(){return staffList.map(function(staff,index){return React.createElement(View,{style:styles.staffInfoContainer,key:index},React.createElement(Text,{style:styles.text},\" \",staff.firstName,\" \",staff.lastName,\" \",\" - \",staff.hasDiploma?\"Diploma/Working Towards\":\"No diploma\"),removing?React.createElement(TouchableOpacity,{onPress:function onPress(){return handleRemove(index);}},React.createElement(FontAwesomeIcon,{icon:faMinusCircle,size:0,color:\"red\"})):null);});};useEffect(function(){if(!Array.isArray(staffList)||staffList.length===0){setRemoving(false);}},[staffList]);return React.createElement(View,{style:styles.container},!Array.isArray(staffList)||staffList.length===0&&React.createElement(Text,{style:styles.text},\"There are no staff in the directory.\"),Array.isArray(staffList)&&staffList.length!==0?staffToText():null,adding&&React.createElement(View,{style:styles.inputContainer},React.createElement(Text,{style:styles.text},\"First Name\"),React.createElement(TextInput,{style:{height:40,width:\"90%\",backgroundColor:\"white\"},onChangeText:function onChangeText(text){return setInputFirstName(text);}}),React.createElement(Text,{style:styles.text},\"Last Name\"),React.createElement(TextInput,{style:{height:40,width:\"90%\",backgroundColor:\"white\"},onChangeText:function onChangeText(text){return setInputLastName(text);}}),React.createElement(Text,{style:styles.text},\"Has or is working towards diploma?\",\" \",inputDiploma?React.createElement(Emoji,{name:\"+1\",style:{fontSize:30}}):null,inputDiploma!=null&&inputDiploma===false?React.createElement(Emoji,{name:\"-1\",style:{fontSize:30}}):null),React.createElement(View,{style:styles.emojiContainer},React.createElement(TouchableOpacity,{onPress:function onPress(){return setInputDiploma(true);}},React.createElement(Emoji,{name:\"+1\",style:{fontSize:50}})),React.createElement(TouchableOpacity,{onPress:function onPress(){return setInputDiploma(false);}},React.createElement(Emoji,{name:\"-1\",style:{fontSize:50}}))),React.createElement(ButtonAll,{handlePress:handleAdd,title:\"Confirm\"}),React.createElement(ButtonAll,{handlePress:function handlePress(){resetInput();setAdding(false);},title:\"Cancel\"})),!adding&&!removing&&React.createElement(ButtonAll,{handlePress:function handlePress(){return setAdding(true);},title:\"Add Staff\"}),Array.isArray(staffList)&&staffList.length!==0&&!removing&&!adding&&React.createElement(ButtonAll,{handlePress:function handlePress(){return setRemoving(true);},title:\"Remove Staff\"}),Array.isArray(staffList)&&staffList.length!==0&&!adding&&removing&&React.createElement(ButtonAll,{handlePress:function handlePress(){setRemoving(false);resetInput();},title:\"Cancel\"}),!adding&&React.createElement(ButtonAll,{handlePress:handleSubmit,title:\"Save all changes\"}));};var styles=StyleSheet.create({container:{padding:\"3.5%\",alignItems:\"center\",flex:1,backgroundColor:\"#FAFAFA\"},staffInfoContainer:{backgroundColor:\"white\",borderRadius:5,flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",width:\"100%\"},form:{backgroundColor:\"white\",borderRadius:5},text:{fontFamily:\"mainFont\",fontSize:20,marginBottom:\"1%\"},stat:{flex:1,flexDirection:\"column\",fontFamily:\"mainFont\"},inputContainer:{flex:2,width:\"100%\",marginTop:\"5%\"},button:{width:\"30%\",backgroundColor:\"white\",fontFamily:\"mainFont\",borderRadius:20,marginTop:\"2%\",fontSize:20,color:\"black\",justifyContent:\"center\",textAlign:\"center\"},label:{margin:8},emojiContainer:{flexDirection:\"row\"}});","map":{"version":3,"sources":["/Users/clairelivingstone/Desktop/ratio-tracker/client/DiplomaInfo.js"],"names":["React","useState","useEffect","Emoji","AsyncStorage","FontAwesomeIcon","faMinusCircle","ButtonAll","DiplomaInfo","props","inputFirstName","setInputFirstName","inputLastName","setInputLastName","inputDiploma","setInputDiploma","adding","setAdding","removing","setRemoving","staffList","setStaffList","sorted","staffObjectList","sort","a","b","x","firstName","toLowerCase","y","storeData","value","jsonValue","JSON","stringify","setItem","then","e","alert","getData","getItem","parse","console","log","val","catch","resetInput","handleRemove","index","newStaffList","filter","staff","handleAdd","newStaffInfo","lastName","hasDiploma","Array","isArray","length","handleSubmit","navigation","goBack","staffToText","map","styles","staffInfoContainer","text","container","inputContainer","height","width","backgroundColor","fontSize","emojiContainer","StyleSheet","create","padding","alignItems","flex","borderRadius","flexDirection","justifyContent","form","fontFamily","marginBottom","stat","marginTop","button","color","textAlign","label","margin"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  View,\n  StyleSheet,\n  Text,\n  TouchableOpacity,\n  TextInput,\n} from \"react-native\";\nimport Emoji from \"react-native-emoji\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-native-fontawesome\";\nimport { faMinusCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { ButtonAll } from \"./ButtonAll\";\nexport const DiplomaInfo = (props) => {\n  const [inputFirstName, setInputFirstName] = useState(\"\");\n  const [inputLastName, setInputLastName] = useState(\"\");\n  const [inputDiploma, setInputDiploma] = useState(null);\n  const [adding, setAdding] = useState(false);\n  const [removing, setRemoving] = useState(false);\n  const [staffList, setStaffList] = useState();\n\n  const sorted = (staffObjectList) => {\n    staffObjectList.sort((a, b) => {\n      let x = a.firstName[0].toLowerCase();\n      let y = b.firstName[0].toLowerCase();\n      if (x < y) {\n        return -1;\n      }\n      if (x > y) {\n        return 1;\n      }\n      return 0;\n    });\n    return staffObjectList;\n  };\n\n  const storeData = async (value) => {\n    try {\n      setStaffList(sorted(value));\n      const jsonValue = JSON.stringify(value);\n      AsyncStorage.setItem(\"staffInfo\", jsonValue).then(setStaffList(value));\n    } catch (e) {\n      alert(\"Error saving, try again\");\n    }\n  };\n\n  useEffect(() => {\n    const getData = async () => {\n      try {\n        let jsonValue = await AsyncStorage.getItem(\"staffInfo\");\n        if (jsonValue !== null) {\n          return JSON.parse(jsonValue);\n        } else {\n          return [];\n        }\n      } catch (e) {\n        console.log(\"ERROR\");\n      }\n    };\n    getData()\n      .then((val) => {\n        setStaffList(sorted(val));\n      })\n      .catch((e) => console.log(\"failed\"));\n  }, []);\n\n  const resetInput = () => {\n    setInputFirstName(\"\");\n    setInputLastName(\"\");\n    setInputDiploma(null);\n  };\n\n  const handleRemove = async (index) => {\n    const newStaffList = staffList.filter((staff) => staff != staffList[index]);\n    setStaffList(newStaffList);\n  };\n\n  const handleAdd = async () => {\n    if (!inputFirstName || !inputLastName || inputDiploma === null) {\n      alert(\"Invalid: Information needed (Full name and Diploma status)\");\n      return;\n    }\n\n    const newStaffInfo = {\n      firstName: inputFirstName,\n      lastName: inputLastName,\n      hasDiploma: inputDiploma,\n    };\n\n    let newStaffList;\n    if (Array.isArray(staffList) && staffList.length) {\n      newStaffList = [...staffList, newStaffInfo];\n    } else {\n      newStaffList = [newStaffInfo];\n    }\n    setStaffList(newStaffList);\n    resetInput();\n    setAdding(false);\n  };\n\n  const handleSubmit = () => {\n    storeData(sorted(staffList));\n    setStaffList([]);\n    props.navigation.goBack();\n  };\n\n  const staffToText = () => {\n    return staffList.map((staff, index) => (\n      <View style={styles.staffInfoContainer} key={index}>\n        <Text style={styles.text}>\n          {\" \"}\n          {staff.firstName} {staff.lastName} {\" - \"}\n          {staff.hasDiploma ? \"Diploma/Working Towards\" : \"No diploma\"}\n        </Text>\n        {removing ? (\n          <TouchableOpacity onPress={() => handleRemove(index)}>\n            <FontAwesomeIcon\n              icon={faMinusCircle}\n              size={0}\n              color={\"red\"}\n            ></FontAwesomeIcon>\n          </TouchableOpacity>\n        ) : null}\n      </View>\n    ));\n  };\n\n  useEffect(() => {\n    if (!Array.isArray(staffList) || staffList.length === 0) {\n      setRemoving(false);\n    }\n  }, [staffList]);\n\n  return (\n    <View style={styles.container}>\n      {!Array.isArray(staffList) ||\n        (staffList.length === 0 && (\n          <Text style={styles.text}>There are no staff in the directory.</Text>\n        ))}\n\n      {Array.isArray(staffList) && staffList.length !== 0\n        ? staffToText()\n        : null}\n\n      {adding && (\n        <View style={styles.inputContainer}>\n          <Text style={styles.text}>First Name</Text>\n          <TextInput\n            style={{\n              height: 40,\n              width: \"90%\",\n              backgroundColor: \"white\",\n            }}\n            onChangeText={(text) => setInputFirstName(text)}\n          />\n          <Text style={styles.text}>Last Name</Text>\n\n          <TextInput\n            style={{\n              height: 40,\n              width: \"90%\",\n              backgroundColor: \"white\",\n            }}\n            onChangeText={(text) => setInputLastName(text)}\n          />\n          <Text style={styles.text}>\n            Has or is working towards diploma?{\" \"}\n            {inputDiploma ? <Emoji name=\"+1\" style={{ fontSize: 30 }} /> : null}\n            {inputDiploma != null && inputDiploma === false ? (\n              <Emoji name=\"-1\" style={{ fontSize: 30 }} />\n            ) : null}\n          </Text>\n\n          <View style={styles.emojiContainer}>\n            <TouchableOpacity onPress={() => setInputDiploma(true)}>\n              <Emoji name=\"+1\" style={{ fontSize: 50 }} />\n            </TouchableOpacity>\n\n            <TouchableOpacity onPress={() => setInputDiploma(false)}>\n              <Emoji name=\"-1\" style={{ fontSize: 50 }} />\n            </TouchableOpacity>\n          </View>\n\n          <ButtonAll handlePress={handleAdd} title=\"Confirm\" />\n          <ButtonAll\n            handlePress={() => {\n              resetInput();\n              setAdding(false);\n            }}\n            title=\"Cancel\"\n          />\n        </View>\n      )}\n\n      {!adding && !removing && (\n        <ButtonAll handlePress={() => setAdding(true)} title=\"Add Staff\" />\n      )}\n\n      {Array.isArray(staffList) &&\n        staffList.length !== 0 &&\n        !removing &&\n        !adding && (\n          <ButtonAll\n            handlePress={() => setRemoving(true)}\n            title=\"Remove Staff\"\n          />\n        )}\n      {Array.isArray(staffList) &&\n        staffList.length !== 0 &&\n        !adding &&\n        removing && (\n          <ButtonAll\n            handlePress={() => {\n              setRemoving(false);\n              resetInput();\n            }}\n            title=\"Cancel\"\n          />\n        )}\n      {!adding && (\n        <ButtonAll handlePress={handleSubmit} title=\"Save all changes\" />\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    padding: \"3.5%\",\n    alignItems: \"center\",\n    flex: 1,\n    backgroundColor: \"#FAFAFA\",\n  },\n  staffInfoContainer: {\n    backgroundColor: \"white\",\n    borderRadius: 5,\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    width: \"100%\",\n  },\n  form: {\n    backgroundColor: \"white\",\n    borderRadius: 5,\n  },\n  text: {\n    fontFamily: \"mainFont\",\n    fontSize: 20,\n    marginBottom: \"1%\",\n  },\n  stat: {\n    flex: 1,\n    flexDirection: \"column\",\n    fontFamily: \"mainFont\",\n  },\n  inputContainer: {\n    flex: 2,\n    width: \"100%\",\n    marginTop: \"5%\",\n  },\n  button: {\n    width: \"30%\",\n    backgroundColor: \"white\",\n    fontFamily: \"mainFont\",\n    borderRadius: 20,\n    marginTop: \"2%\",\n    fontSize: 20,\n    color: \"black\",\n    justifyContent: \"center\",\n    textAlign: \"center\",\n  },\n  label: {\n    margin: 8,\n  },\n  emojiContainer: {\n    flexDirection: \"row\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}