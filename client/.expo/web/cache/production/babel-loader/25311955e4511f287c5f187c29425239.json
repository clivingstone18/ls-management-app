{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from\"react\";import Clock from\"./Clock\";import View from\"react-native-web/dist/exports/View\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import Image from\"react-native-web/dist/exports/Image\";import{useFonts}from\"expo-font\";import{calcRatio}from\"./calcRatio\";import{Stats}from\"./Stats\";import{Widgets}from\"./Widgets\";import{StaffPanel}from\"./StaffPanel\";import AsyncStorage from\"@react-native-async-storage/async-storage\";import{useIsFocused}from\"@react-navigation/native\";export var Home=function Home(props){var isFocused=useIsFocused();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([{date:\"none\",numKook:0,numKangaroos:0,numEmus:0,numNursery:0,staffOnDuty:[]}]),_useState4=_slicedToArray(_useState3,2),info=_useState4[0],setInfo=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),staffOnDuty=_useState6[0],setStaffOnDuty=_useState6[1];var _useFonts=useFonts({mainFont:require(\"./assets/fonts/Roboto-Thin.ttf\")}),_useFonts2=_slicedToArray(_useFonts,1),fontLoaded=_useFonts2[0];useEffect(function(){setLoading(true);var getData=function getData(){var jsonValue;return _regeneratorRuntime.async(function getData$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"childrenCount\"));case 3:jsonValue=_context.sent;if(!(jsonValue!==null)){_context.next=8;break;}return _context.abrupt(\"return\",JSON.parse(jsonValue));case 8:return _context.abrupt(\"return\",[{date:\"none\",numKook:0,numKangaroos:0,numEmus:0,numNursery:0,staffOnDuty:[]}]);case 9:_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);return _context.abrupt(\"return\",_context.t0);case 15:case\"end\":return _context.stop();}}},null,null,[[0,11]],Promise);};getData().then(function(val){setLoading(false);setInfo(val);}).catch(function(e){return console.log(\"failed\");});},[props,isFocused]);var reset=function reset(){var item;return _regeneratorRuntime.async(function reset$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setInfo([{date:\"none\",numNursery:0,numKook:0,numKangaroos:0,numEmus:0,staffOnDuty:[]}]);setStaffOnDuty([]);_context2.prev=2;_context2.next=5;return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"childrenCount\",\"\"));case 5:item=_context2.sent;return _context2.abrupt(\"return\",item);case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);return _context2.abrupt(\"return\",_context2.t0);case 12:case\"end\":return _context2.stop();}}},null,null,[[2,9]],Promise);};var staffNeeded=calcRatio(info[info.length-1].numNursery,info[info.length-1].numKook,info[info.length-1].numEmus+info[info.length-1].numKangaroos);if(fontLoaded&&!loading){return React.createElement(View,{style:styles.container},React.createElement(View,{style:styles.topPanel},React.createElement(Image,{source:require(\"./assets/kindyLogo.png\")}),React.createElement(StaffPanel,{staff:staffOnDuty,navigate:props.navigation.navigate,setStaffOnDuty:setStaffOnDuty,staffNeeded:staffNeeded})),React.createElement(Clock,null),React.createElement(Stats,{info:info}),React.createElement(Widgets,{navigate:props.navigation.navigate,setInfo:setInfo,info:info,staffOnDuty:staffOnDuty,setStaffOnDuty:setStaffOnDuty,reset:reset}));}else{return React.createElement(Text,null,\"Font not loaded\");}};var styles=StyleSheet.create({container:{flex:1,backgroundColor:\"#FAFAFA\",justifyContent:\"space-around\",paddingTop:\"0%\"},widgetContainer:{flex:0.4,alignItems:\"center\",flexDirection:\"row\",justifyContent:\"space-evenly\"},topPanel:{flex:0.15,flexDirection:\"row\",justifyContent:\"space-between\",paddingLeft:\"2%\",paddingTop:\"2%\"},statsContainer:{backgroundColor:\"green\",flex:0.2,alignItems:\"center\",flexDirection:\"row\",justifyContent:\"space-between\",padding:\"5%\"},text:{fontFamily:\"mainFont\",fontSize:30,marginBottom:\"5%\"},stat:{flex:1,flexDirection:\"column\",fontFamily:\"mainFont\"},widget:{width:\"30%\",height:\"100%\",alignItems:\"center\",justifyContent:\"center\",textAlign:\"center\",backgroundColor:\"white\",borderRadius:20,shadowColor:\"#000\",shadowOffset:{width:0,height:12},marginBottom:\"5%\",shadowOpacity:0.58,shadowRadius:16.0,paddingLeft:\"2%\",elevation:24}});","map":{"version":3,"sources":["/Users/clairelivingstone/Desktop/ratio-tracker/client/Home.js"],"names":["React","useState","useEffect","Clock","useFonts","calcRatio","Stats","Widgets","StaffPanel","AsyncStorage","useIsFocused","Home","props","isFocused","loading","setLoading","date","numKook","numKangaroos","numEmus","numNursery","staffOnDuty","info","setInfo","setStaffOnDuty","mainFont","require","fontLoaded","getData","getItem","jsonValue","JSON","parse","console","log","then","val","catch","e","reset","setItem","item","staffNeeded","length","styles","container","topPanel","navigation","navigate","StyleSheet","create","flex","backgroundColor","justifyContent","paddingTop","widgetContainer","alignItems","flexDirection","paddingLeft","statsContainer","padding","text","fontFamily","fontSize","marginBottom","stat","widget","width","height","textAlign","borderRadius","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Clock from \"./Clock\";\nimport { View, StyleSheet, Text, Image } from \"react-native\";\nimport { useFonts } from \"expo-font\";\nimport { calcRatio } from \"./calcRatio\";\nimport { Stats } from \"./Stats\";\nimport { Widgets } from \"./Widgets\";\nimport { StaffPanel } from \"./StaffPanel\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useIsFocused } from \"@react-navigation/native\";\n\n\nexport const Home = (props) => {\n  const isFocused = useIsFocused();\n  const [loading, setLoading] = useState(false)\n  const [info, setInfo] = useState([\n    {\n      date: \"none\",\n      numKook: 0,\n      numKangaroos: 0,\n      numEmus: 0,\n      numNursery: 0,\n      staffOnDuty: [],\n    },\n  ]);\n  const [staffOnDuty, setStaffOnDuty] = useState([]);\n  const [fontLoaded] = useFonts({\n    mainFont: require(\"./assets/fonts/Roboto-Thin.ttf\"),\n  });\n\n  useEffect(() => {\n    setLoading(true);\n    const getData = async () => {\n      try {\n        let jsonValue = await AsyncStorage.getItem(\"childrenCount\");\n        if (jsonValue !== null) {\n          return JSON.parse(jsonValue);\n        } else {\n          return ([\n            {\n              date: \"none\",\n              numKook: 0,\n              numKangaroos: 0,\n              numEmus: 0,\n              numNursery: 0,\n              staffOnDuty: [],\n            },\n          ]);\n        }\n      } catch (e) {\n        console.log(e);\n        return e;\n      }\n    };\n    getData()\n      .then((val) => {\n        setLoading(false);\n        setInfo(val)\n      })\n      .catch((e) => console.log(\"failed\"));\n  }, [props, isFocused]);\n\n\n\n  const reset = async () => {\n    setInfo([\n      {\n        date: \"none\",\n        numNursery: 0,\n        numKook: 0,\n        numKangaroos: 0,\n        numEmus: 0,\n        staffOnDuty: [],\n      },\n    ]);\n    setStaffOnDuty([]);\n    try {\n      let item = await AsyncStorage.setItem(\"childrenCount\", \"\");\n      return item;\n    }\n    catch (err) {\n      return err\n    }\n\n  };\n\n  const staffNeeded = calcRatio(\n    info[info.length - 1].numNursery,\n    info[info.length - 1].numKook,\n    info[info.length - 1].numEmus + info[info.length - 1].numKangaroos\n  );\n\n  if (fontLoaded && !loading) {\n    return (\n      <View style={styles.container}>\n        <View style={styles.topPanel}>\n          <Image source={require(\"./assets/kindyLogo.png\")} />\n          <StaffPanel\n            staff={staffOnDuty}\n            navigate={props.navigation.navigate}\n            setStaffOnDuty={setStaffOnDuty}\n            staffNeeded={staffNeeded}\n          />\n        </View>\n        <Clock />\n        <Stats info={info} />\n        <Widgets\n          navigate={props.navigation.navigate}\n          setInfo={setInfo}\n          info={info}\n          staffOnDuty={staffOnDuty}\n          setStaffOnDuty={setStaffOnDuty}\n          reset={reset}\n        />\n      </View>\n    );\n  } else {\n    return <Text>Font not loaded</Text>;\n  }\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#FAFAFA\",\n    justifyContent: \"space-around\",\n    paddingTop: \"0%\",\n  },\n  widgetContainer: {\n    flex: 0.4,\n    alignItems: \"center\",\n    flexDirection: \"row\",\n    justifyContent: \"space-evenly\",\n  },\n  topPanel: {\n    flex: 0.15,\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    paddingLeft: \"2%\",\n    paddingTop: \"2%\",\n  },\n  statsContainer: {\n    backgroundColor: \"green\",\n    flex: 0.2,\n    alignItems: \"center\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    padding: \"5%\",\n  },\n  text: {\n    fontFamily: \"mainFont\",\n    fontSize: 30,\n    marginBottom: \"5%\",\n  },\n  stat: {\n    flex: 1,\n    flexDirection: \"column\",\n    fontFamily: \"mainFont\",\n  },\n  widget: {\n    width: \"30%\",\n    height: \"100%\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    textAlign: \"center\",\n    backgroundColor: \"white\",\n    borderRadius: 20,\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 12,\n    },\n    marginBottom: \"5%\",\n    shadowOpacity: 0.58,\n    shadowRadius: 16.0,\n    paddingLeft: \"2%\",\n    elevation: 24,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}