{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from\"react\";import AsyncStorage from\"@react-native-async-storage/async-storage\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Button from\"react-native-web/dist/exports/Button\";import{TeacherToggle}from\"./TeacherToggle.js\";export var ChangeTeacher=function ChangeTeacher(props){var _useState=useState(props.route.params.staffOnDuty),_useState2=_slicedToArray(_useState,2),staffPicked=_useState2[0],setStaffPicked=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),submit=_useState4[0],setSubmit=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),staffList=_useState6[0],setStaffList=_useState6[1];var info=props.route.params.info;var handleSubmit=function handleSubmit(){setSubmit(true);};useEffect(function(){var getData=function getData(){var jsonValue;return _regeneratorRuntime.async(function getData$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"staffInfo\"));case 3:jsonValue=_context.sent;if(!(jsonValue!==null)){_context.next=8;break;}return _context.abrupt(\"return\",JSON.parse(jsonValue));case 8:return _context.abrupt(\"return\",[]);case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(\"ERROR\");case 14:case\"end\":return _context.stop();}}},null,null,[[0,11]],Promise);};getData().then(function(val){setStaffList(val);}).catch(function(e){return console.log(\"failed\");});},[]);useEffect(function(){if(submit===true){props.route.params.setStaffOnDuty(staffPicked);props.navigation.goBack();}},[submit]);var handleRemove=function handleRemove(index){if(staffPicked.length<2){alert(\"Must have at least one teacher\");return 0;}console.log(\"STAFF TO DELETE\");console.log(staffList[index]);console.log(\"ALL STAFF PRESENT\");console.log(staffPicked);var newList=staffPicked.filter(function(staff){return staff.firstName!==staffList[index].firstName&&staff.firstName!==staffList[index].firstName;});console.log(\"NEW LIST\");console.log(newList);setStaffPicked(newList);return 1;};var handleSelection=function handleSelection(value,i){for(var j=0;j<staffPicked.length;j++){if(i!=j&&value.firstName===staffPicked[j].firstName&&value.lastName===staffPicked[j].lastName){return;}}var newStaffList=[].concat(_toConsumableArray(staffPicked.slice(0,i)),[value],_toConsumableArray(staffPicked.slice(i+1)));setStaffPicked(newStaffList);return;};return React.createElement(React.Fragment,null,staffList.map(function(staff,index){return React.createElement(TeacherToggle,{key:index,staff:staff,handleSelection:handleSelection,index:index,onDuty:staffPicked.filter(function(mem){return mem.firstName===staff.firstName&&mem.lastName===staff.lastName;}).length>0,handleRemove:handleRemove});}),React.createElement(Button,{title:\"Submit changes\",onPress:handleSubmit}));};var styles=StyleSheet.create({container:{padding:\"3.5%\",flex:1,backgroundColor:\"#FAFAFA\"},form:{backgroundColor:\"white\",borderRadius:5},text:{fontFamily:\"mainFont\",fontSize:20,marginBottom:\"1%\",alignSelf:\"center\"},stat:{flex:1,flexDirection:\"column\",fontFamily:\"mainFont\"},button:{width:\"30%\",backgroundColor:\"white\",fontFamily:\"mainFont\",borderRadius:10,marginTop:\"2%\",fontSize:20,color:\"black\",justifyContent:\"center\",textAlign:\"center\",alignItems:\"center\",backgroundColor:\"lightblue\"}});","map":{"version":3,"sources":["/Users/clairelivingstone/Desktop/ratio-tracker/client/ChangeTeacher.js"],"names":["React","useState","useEffect","AsyncStorage","TeacherToggle","ChangeTeacher","props","route","params","staffOnDuty","staffPicked","setStaffPicked","submit","setSubmit","staffList","setStaffList","info","handleSubmit","getData","getItem","jsonValue","JSON","parse","console","log","then","val","catch","e","setStaffOnDuty","navigation","goBack","handleRemove","index","length","alert","newList","filter","staff","firstName","handleSelection","value","i","j","lastName","newStaffList","slice","map","mem","styles","StyleSheet","create","container","padding","flex","backgroundColor","form","borderRadius","text","fontFamily","fontSize","marginBottom","alignSelf","stat","flexDirection","button","width","marginTop","color","justifyContent","textAlign","alignItems"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport {\n  StyleSheet,\n  Button,\n} from \"react-native\";\nimport { TeacherToggle } from \"./TeacherToggle.js\";\n\nexport const ChangeTeacher = (props) => {\n  const [staffPicked, setStaffPicked] = useState(\n    props.route.params.staffOnDuty\n  );\n  const [submit, setSubmit] = useState(false);\n  const [staffList, setStaffList] = useState([]);\n\n  const info = props.route.params.info;\n\n  const handleSubmit = () => {\n    setSubmit(true);\n  };\n\n  useEffect(() => {\n    const getData = async () => {\n      try {\n        let jsonValue = await AsyncStorage.getItem(\"staffInfo\");\n        if (jsonValue !== null) {\n          return JSON.parse(jsonValue);\n        } else {\n          return [];\n        }\n      } catch (e) {\n        console.log(\"ERROR\");\n      }\n    };\n    getData()\n      .then((val) => {\n        setStaffList(val);\n      })\n      .catch((e) => console.log(\"failed\"));\n  }, []);\n\n  useEffect(() => {\n    if (submit === true) {\n      props.route.params.setStaffOnDuty(staffPicked);\n      props.navigation.goBack();\n    }\n  }, [submit]);\n\n  const handleRemove = (index) => {\n    if (staffPicked.length < 2) {\n      alert(\"Must have at least one teacher\");\n      return 0;\n    }\n\n    console.log(\"STAFF TO DELETE\");\n    console.log(staffList[index]);\n    console.log(\"ALL STAFF PRESENT\");\n    console.log(staffPicked);\n\n    const newList = staffPicked.filter(\n      (staff) =>\n        staff.firstName !== staffList[index].firstName &&\n        staff.firstName !== staffList[index].firstName\n    );\n    console.log(\"NEW LIST\");\n    console.log(newList);\n\n    setStaffPicked(newList);\n    return 1;\n  };\n\n  const handleSelection = (value, i) => {\n    for (let j = 0; j < staffPicked.length; j++) {\n      if (\n        i != j &&\n        value.firstName === staffPicked[j].firstName &&\n        value.lastName === staffPicked[j].lastName\n      ) {\n        return;\n      }\n    }\n    const newStaffList = [\n      ...staffPicked.slice(0, i),\n      value,\n      ...staffPicked.slice(i + 1),\n    ];\n    setStaffPicked(newStaffList);\n    return;\n  };\n\n  return (\n    <>\n      {staffList.map((staff, index) => {\n        return (\n          <TeacherToggle\n            key={index}\n            staff={staff}\n            handleSelection={handleSelection}\n            index={index}\n            onDuty={\n              staffPicked.filter(\n                (mem) =>\n                  mem.firstName === staff.firstName &&\n                  mem.lastName === staff.lastName\n              ).length > 0\n            }\n            handleRemove={handleRemove}\n          />\n        );\n      })}\n      <Button title=\"Submit changes\" onPress={handleSubmit}></Button>\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    padding: \"3.5%\",\n    flex: 1,\n    backgroundColor: \"#FAFAFA\",\n  },\n  form: {\n    backgroundColor: \"white\",\n    borderRadius: 5,\n  },\n\n  text: {\n    fontFamily: \"mainFont\",\n    fontSize: 20,\n    marginBottom: \"1%\",\n    alignSelf: \"center\",\n  },\n  stat: {\n    flex: 1,\n    flexDirection: \"column\",\n    fontFamily: \"mainFont\",\n  },\n  button: {\n    width: \"30%\",\n    backgroundColor: \"white\",\n    fontFamily: \"mainFont\",\n    borderRadius: 10,\n    marginTop: \"2%\",\n    fontSize: 20,\n    color: \"black\",\n    justifyContent: \"center\",\n    textAlign: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"lightblue\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}