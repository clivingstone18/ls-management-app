{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from\"react\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import{Table,Row,Rows}from\"react-native-table-component\";import{timeToStr}from\"./TimeKeeper.js\";import{calcRatio}from\"./calcRatio\";var _Dimensions$get=Dimensions.get(\"window\"),height=_Dimensions$get.height;export var PrintSheet=function PrintSheet(props){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),screenHeight=_useState2[0],setScreenHeight=_useState2[1];var scrollEnabled=screenHeight>height;var _useState3=useState([\"Time\",\"# nursery\",\"# kookaburras\",\"# emus\",\"# kangaroos\",\"# children\",\"# staff\",\"# staff required\",\"Staff name\"]),_useState4=_slicedToArray(_useState3,2),tableHead=_useState4[0],setTableHead=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),tableData=_useState6[0],setTableData=_useState6[1];var processNames=function processNames(staff){var initials=\"\";for(var i=0;i<staff.length;i++){initials+=staff[i].firstName[0]+\".\"+staff[i].lastName[0];if(i!=staff.length-1){initials+=\"\\n\";}}return initials;};useEffect(function(){var info;if(props.info){info=props.info;}else{info=props.route.params.info;}info=info.slice(1,info.length);var res=info.map(function(elem){return[elem.date,elem.numNursery,elem.numKook,elem.numEmus,elem.numKangaroos,elem.numNursery+elem.numKook+elem.numEmus+elem.numKangaroos,elem.staffOnDuty.length,calcRatio(elem.numNursery,elem.numKook,elem.numEmus+elem.numKangaroos),processNames(elem.staffOnDuty)];});setTableData(res);},[]);var onContentSizeChange=function onContentSizeChange(contentWidth,contentHeight){setScreenHeight(contentHeight);};return React.createElement(ScrollView,{style:{flex:1},onContentSizeChange:onContentSizeChange,scrollEnabled:scrollEnabled,contentContainerStyle:styles.scrollview},React.createElement(View,{style:styles.container},React.createElement(Table,{borderStyle:{borderWidth:2,borderColor:\"#c8e1ff\"}},React.createElement(Row,{data:tableHead,style:styles.head,textStyle:styles.text}),React.createElement(Rows,{data:tableData,textStyle:styles.text}))));};var styles=StyleSheet.create({container:{flex:1,padding:16,paddingTop:30,backgroundColor:\"#fff\"},head:{height:40,backgroundColor:\"#f1f8ff\"},text:{margin:6},scrollview:{flexGrow:1}});","map":{"version":3,"sources":["/Users/clairelivingstone/Desktop/ratio-tracker/client/PrintSheet.js"],"names":["React","useState","useEffect","Table","Row","Rows","timeToStr","calcRatio","Dimensions","get","height","PrintSheet","props","screenHeight","setScreenHeight","scrollEnabled","tableHead","setTableHead","tableData","setTableData","processNames","staff","initials","i","length","firstName","lastName","info","route","params","slice","res","map","elem","date","numNursery","numKook","numEmus","numKangaroos","staffOnDuty","onContentSizeChange","contentWidth","contentHeight","flex","styles","scrollview","container","borderWidth","borderColor","head","text","StyleSheet","create","padding","paddingTop","backgroundColor","margin","flexGrow"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { StyleSheet, View, Dimensions, ScrollView } from \"react-native\";\nimport { Table, Row, Rows } from \"react-native-table-component\";\nimport { timeToStr } from \"./TimeKeeper.js\";\nimport { calcRatio } from \"./calcRatio\";\n\nconst { height } = Dimensions.get(\"window\");\n\nexport const PrintSheet = (props) => {\n  const [screenHeight, setScreenHeight] = useState(0);\n  const scrollEnabled = screenHeight > height;\n\n  const [tableHead, setTableHead] = useState([\n    \"Time\",\n    \"# nursery\",\n    \"# kookaburras\",\n    \"# emus\",\n    \"# kangaroos\",\n    \"# children\",\n    \"# staff\",\n    \"# staff required\",\n    \"Staff name\",\n  ]);\n\n  const [tableData, setTableData] = useState([]);\n\n  const processNames = (staff) => {\n    let initials = \"\";\n    for (let i = 0; i < staff.length; i++) {\n      initials += staff[i].firstName[0] + \".\" + staff[i].lastName[0];\n      if (i != staff.length - 1) {\n        initials += \"\\n\";\n      }\n    }\n    return initials;\n  };\n\n  useEffect(() => {\n    let info;\n    if (props.info) {\n      info = props.info;\n    } else {\n      info = props.route.params.info;\n    }\n    info = info.slice(1, info.length);\n    const res = info.map((elem) => [\n      elem.date,\n      elem.numNursery,\n      elem.numKook,\n      elem.numEmus,\n      elem.numKangaroos,\n      elem.numNursery + elem.numKook + elem.numEmus + elem.numKangaroos,\n      elem.staffOnDuty.length,\n      calcRatio(\n        elem.numNursery,\n        elem.numKook,\n        elem.numEmus + elem.numKangaroos\n      ),\n      processNames(elem.staffOnDuty),\n    ]);\n    setTableData(res);\n  }, []);\n\n  const onContentSizeChange = (contentWidth, contentHeight) => {\n    setScreenHeight(contentHeight);\n  };\n\n  return (\n    <ScrollView\n      style={{ flex: 1 }}\n      onContentSizeChange={onContentSizeChange}\n      scrollEnabled={scrollEnabled}\n      contentContainerStyle={styles.scrollview}\n    >\n      <View style={styles.container}>\n        <Table borderStyle={{ borderWidth: 2, borderColor: \"#c8e1ff\" }}>\n          <Row data={tableHead} style={styles.head} textStyle={styles.text} />\n          <Rows data={tableData} textStyle={styles.text} />\n        </Table>\n      </View>\n    </ScrollView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: { flex: 1, padding: 16, paddingTop: 30, backgroundColor: \"#fff\" },\n  head: { height: 40, backgroundColor: \"#f1f8ff\" },\n  text: { margin: 6 },\n  scrollview: {\n    flexGrow: 1,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}