{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/clairelivingstone/Desktop/ratio-tracker/client/PrintSheet.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { Table, Row, Rows } from \"react-native-table-component\";\nimport { calcRatio } from \"./calcRatio\";\nimport moment from \"moment\";\nimport UserService from \"./services/UserService\";\nimport AnimatedLoader from \"react-native-animated-loader\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-native-fontawesome\";\nimport { faPrint } from \"@fortawesome/free-solid-svg-icons\";\nimport { print } from \"./print\";\n\nvar _Dimensions$get = Dimensions.get(\"window\"),\n    height = _Dimensions$get.height;\n\nexport var PrintSheet = function PrintSheet(_ref) {\n  var currDate = _ref.currDate;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      screenHeight = _useState2[0],\n      setScreenHeight = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      info = _useState6[0],\n      setInfo = _useState6[1];\n\n  var handlePrint = function handlePrint() {\n    print(info, currDate).then(function (res) {\n      return console.log(res);\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  };\n\n  var _useState7 = useState([\"Time\", \"# nursery\", \"# kookaburras\", \"# emus\", \"# kangaroos\", \"# children\", \"# staff\", \"# staff required\", \"Staff name\"]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      tableHead = _useState8[0],\n      setTableHead = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      tableData = _useState10[0],\n      setTableData = _useState10[1];\n\n  var processNames = function processNames(staff) {\n    var initials = \"\";\n\n    for (var i = 0; i < staff.length; i++) {\n      initials += staff[i].firstname[0] + \".\" + staff[i].lastname[0];\n\n      if (i != staff.length - 1) {\n        initials += \"\\n\";\n      }\n    }\n\n    return initials;\n  };\n\n  useEffect(function () {\n    setLoading(true);\n    var date = moment(currDate).format(\"YYYY-MM-DD\");\n    UserService.getClassDataOnDate(date).then(function (res) {\n      setLoading(false);\n      var classInfo = res.data[0].rows;\n      var staffInfo = res.data[1].rows;\n      var elements = classInfo.map(function (elem) {\n        var staffOnDuty = staffInfo.filter(function (staff) {\n          return staff.entryid === elem.entryid;\n        });\n        return [moment(elem.timeof, 'HH:mm:ss').format('hh:mm A'), elem.numkoala, elem.numkook, elem.numemu, elem.numkang, elem.numkoala + elem.numkook + elem.numemu + elem.numkang, staffOnDuty.length, calcRatio(elem.numkoala, elem.numkook, elem.numemu + elem.numkang), processNames(staffOnDuty)];\n      });\n      setTableData(elements);\n      setInfo(elements);\n    }).catch(function (err) {\n      return setLoading(false);\n    });\n  }, [currDate]);\n\n  var onContentSizeChange = function onContentSizeChange(contentWidth, contentHeight) {\n    setScreenHeight(contentHeight);\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }, loading ? React.createElement(AnimatedLoader, {\n    visible: true,\n    overlayColor: \"rgba(255,255,255,0.75)\",\n    source: require(\"./StaffDirectory/loader.json\"),\n    animationStyle: styles.lottie,\n    speed: 1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 20\n    }\n  }) : React.createElement(React.Fragment, null, React.createElement(View, {\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      flexDirection: \"row\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 3\n    }\n  }, React.createElement(Text, {\n    style: styles.titleText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 3\n    }\n  }, \"Ratio Sheet for \", moment(currDate).format(\"dddd, MMMM Do YYYY\")), React.createElement(TouchableOpacity, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 3\n    }\n  }, React.createElement(FontAwesomeIcon, {\n    icon: faPrint,\n    onPress: handlePrint,\n    size: 20,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 21\n    }\n  }))), React.createElement(Table, {\n    borderStyle: {\n      borderWidth: 2,\n      borderColor: \"#c8e1ff\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, React.createElement(Row, {\n    data: tableHead,\n    style: styles.head,\n    textStyle: styles.text,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }), React.createElement(Rows, {\n    data: tableData,\n    textStyle: styles.text,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }))));\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 16,\n    paddingTop: 30,\n    backgroundColor: \"#fff\"\n  },\n  head: {\n    height: 40,\n    backgroundColor: \"#f1f8ff\"\n  },\n  titleText: {\n    fontFamily: \"mainFont\",\n    fontSize: 25,\n    marginBottom: \"2%\",\n    alignSelf: \"center\"\n  },\n  lottie: {\n    width: 100,\n    height: 100\n  },\n  text: {\n    margin: 6\n  },\n  scrollview: {\n    flexGrow: 1\n  }\n});","map":{"version":3,"sources":["/Users/clairelivingstone/Desktop/ratio-tracker/client/PrintSheet.js"],"names":["React","useState","useEffect","Table","Row","Rows","calcRatio","moment","UserService","AnimatedLoader","FontAwesomeIcon","faPrint","print","Dimensions","get","height","PrintSheet","currDate","screenHeight","setScreenHeight","loading","setLoading","info","setInfo","handlePrint","then","res","console","log","catch","err","tableHead","setTableHead","tableData","setTableData","processNames","staff","initials","i","length","firstname","lastname","date","format","getClassDataOnDate","classInfo","data","rows","staffInfo","elements","map","elem","staffOnDuty","filter","entryid","timeof","numkoala","numkook","numemu","numkang","onContentSizeChange","contentWidth","contentHeight","styles","container","require","lottie","display","justifyContent","flexDirection","titleText","borderWidth","borderColor","head","text","StyleSheet","create","flex","padding","paddingTop","backgroundColor","fontFamily","fontSize","marginBottom","alignSelf","width","margin","scrollview","flexGrow"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { StyleSheet, View, Dimensions, TouchableOpacity, Text } from \"react-native\";\nimport { Table, Row, Rows } from \"react-native-table-component\";\nimport { calcRatio } from \"./calcRatio\";\nimport moment from \"moment\";\nimport UserService from \"./services/UserService\"\nimport AnimatedLoader from \"react-native-animated-loader\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-native-fontawesome\";\nimport { faPrint } from \"@fortawesome/free-solid-svg-icons\";\nimport { print } from \"./print\";\n\nconst { height } = Dimensions.get(\"window\");\n\nexport const PrintSheet = ({currDate}) => {\n\n  const [screenHeight, setScreenHeight] = useState(0);\n  const [loading, setLoading] = useState(false)\n  const [info, setInfo] = useState();\n\n\n  const handlePrint = () => {\n    print(info, currDate).then(res=>console.log(res)).catch(err=>console.log(err))\n  };\n\n\n  const [tableHead, setTableHead] = useState([\n    \"Time\",\n    \"# nursery\",\n    \"# kookaburras\",\n    \"# emus\",\n    \"# kangaroos\",\n    \"# children\",\n    \"# staff\",\n    \"# staff required\",\n    \"Staff name\",\n  ]);\n\n  const [tableData, setTableData] = useState([]);\n\n  const processNames = (staff) => {\n    let initials = \"\";\n    for (let i = 0; i < staff.length; i++) {\n      initials += staff[i].firstname[0] + \".\" + staff[i].lastname[0];\n      if (i != staff.length - 1) {\n        initials += \"\\n\";\n      }\n    }\n    return initials;\n  };\n\n  useEffect(() => {\n    setLoading(true)\n    // api call to get most recent \n    let date = moment(currDate).format(\"YYYY-MM-DD\")\n\n    UserService.getClassDataOnDate(date).then(res=>{\n      setLoading(false)\n      let classInfo = res.data[0].rows\n      let staffInfo = res.data[1].rows\n    \n      const elements = classInfo.map((elem) =>  {\n        let staffOnDuty = staffInfo.filter(staff => staff.entryid === elem.entryid)\n        return  [\n          moment(elem.timeof,'HH:mm:ss').format('hh:mm A'),\n          elem.numkoala,\n          elem.numkook,\n          elem.numemu,\n          elem.numkang,\n          elem.numkoala + elem.numkook + elem.numemu + elem.numkang,\n          staffOnDuty.length,\n          calcRatio(\n            elem.numkoala,\n            elem.numkook,\n            elem.numemu + elem.numkang\n          ),\n          processNames(staffOnDuty)\n        ]\n      });\n      setTableData(elements)\n      setInfo(elements)\n    }).catch(err=>setLoading(false))\n  }, [currDate]);\n\n  const onContentSizeChange = (contentWidth, contentHeight) => {\n    setScreenHeight(contentHeight);\n  };\n\n  return (\n\n      <View style={styles.container}>\n        {loading ? <AnimatedLoader\n        visible={true}\n        overlayColor=\"rgba(255,255,255,0.75)\"\n        source={require(\"./StaffDirectory/loader.json\")}\n        animationStyle={styles.lottie}\n        speed={1} />\n        \n      \n      \n  :\n  <>\n  <View style={{display: \"flex\", justifyContent: \"space-between\", flexDirection: \"row\"}}>\n  <Text style={styles.titleText}> \n  Ratio Sheet for {moment(currDate).format(\"dddd, MMMM Do YYYY\")} \n  \n\n  </Text>\n  <TouchableOpacity><FontAwesomeIcon\n                icon={faPrint}\n                onPress={handlePrint}\n                size={20} />\n    </TouchableOpacity>\n\n  </View>\n  \n        <Table borderStyle={{ borderWidth: 2, borderColor: \"#c8e1ff\" }}>\n          <Row data={tableHead} style={styles.head} textStyle={styles.text} />\n          <Rows data={tableData} textStyle={styles.text} />\n        </Table>\n        </>\n            }\n      </View>\n\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: { flex: 1, padding: 16, paddingTop: 30, backgroundColor: \"#fff\" },\n  head: { height: 40, backgroundColor: \"#f1f8ff\" },\n  titleText: {\n    fontFamily: \"mainFont\",\n    fontSize: 25,\n    marginBottom: \"2%\",\n    alignSelf: \"center\",\n  },\n  lottie: {\n    width: 100,\n    height: 100\n  },\n  text: { margin: 6 },\n  scrollview: {\n    flexGrow: 1,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}