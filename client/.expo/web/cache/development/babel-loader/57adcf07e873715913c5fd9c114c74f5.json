{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/clairelivingstone/Desktop/ratio-tracker/client/StaffDirectory/DiplomaInfo.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport UserService from \"../services/UserService\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-native-fontawesome\";\nimport { faMinusCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { ButtonAll } from \"../ButtonAll\";\nimport AnimatedLoader from \"react-native-animated-loader\";\nimport { useIsFocused } from \"@react-navigation/native\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nexport var DiplomaInfo = function DiplomaInfo(props) {\n  var staffOnDuty = props.staffOnDuty;\n  var setStaffOnDuty = props.setStaffOnDuty;\n  var setResetting = props.setResetting;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      removing = _useState2[0],\n      setRemoving = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      staffList = _useState4[0],\n      setStaffList = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var isFocused = useIsFocused();\n\n  var storeData = function storeData(value) {\n    var jsonValue;\n    return _regeneratorRuntime.async(function storeData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            jsonValue = JSON.stringify(value);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"staffPicked\", jsonValue));\n\n          case 4:\n            return _context.abrupt(\"return\", value);\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            alert(\"Error saving, try again\");\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  var sorted = function sorted(staffObjectList) {\n    staffObjectList.sort(function (a, b) {\n      var x = a.firstname[0].toLowerCase();\n      var y = b.lastname[0].toLowerCase();\n\n      if (x < y) {\n        return -1;\n      }\n\n      if (x > y) {\n        return 1;\n      }\n\n      return 0;\n    });\n    return staffObjectList;\n  };\n\n  useEffect(function () {\n    if (props.route && props.route.params && props.route.params.cancelled) {\n      return;\n    }\n\n    if (isFocused) {\n      setLoading(true);\n      UserService.getAllStaff().then(function (res) {\n        setStaffList(res.data);\n        setLoading(false);\n      }).catch(function (err) {\n        setLoading(false);\n        console.log(err);\n      });\n    }\n  }, [isFocused]);\n\n  var handleRemove = function handleRemove(staffId) {\n    var newStaffOnDuty;\n    return _regeneratorRuntime.async(function handleRemove$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setLoading(true);\n            newStaffOnDuty = staffOnDuty.filter(function (staff) {\n              return staff.staffid !== staffId;\n            });\n            setStaffOnDuty(newStaffOnDuty);\n            storeData(newStaffOnDuty).then(function (res) {\n              UserService.deleteStaff(staffId).then(function (res) {\n                UserService.getAllStaff().then(function (res) {\n                  setStaffList(res.data);\n                  setLoading(false);\n                }).catch(function (err) {\n                  setLoading(false);\n                  console.log(err);\n                });\n              }).catch(function (err) {\n                setLoading(false);\n                console.log(err);\n              });\n            }).catch(function (err) {\n              setLoading(false);\n              console.log(err);\n            });\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    if (!Array.isArray(staffList) || staffList.length === 0) {\n      setRemoving(false);\n    }\n  }, [staffList]);\n\n  var staffToText = function staffToText() {\n    return React.createElement(View, {\n      style: styles.container,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 5\n      }\n    }, sorted(staffList).map(function (staff, index) {\n      return React.createElement(View, {\n        key: index,\n        style: {\n          display: \"flex\",\n          flexDirection: \"row\",\n          justifyContent: \"space-around\"\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: styles.staffInfoContainer,\n        key: index,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 7\n        }\n      }, React.createElement(Text, {\n        style: styles.boldText,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 9\n        }\n      }, \" \", staff.firstname, \" \", staff.lastname), React.createElement(Text, {\n        style: styles.text,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }\n      }, staff.hasdiploma ? \"Diploma/Working Towards\" : \"No diploma\")), removing ? React.createElement(View, {\n        style: {\n          alignItems: \"center\",\n          paddingLeft: \"5%\",\n          display: \"flex\",\n          justifyContent: \"space-around\"\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 9\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return handleRemove(staff.staffid);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 9\n        }\n      }, React.createElement(FontAwesomeIcon, {\n        icon: faMinusCircle,\n        size: 20,\n        color: \"red\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }\n      }))) : null);\n    }));\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 5\n    }\n  }, loading ? React.createElement(AnimatedLoader, {\n    visible: true,\n    overlayColor: \"rgba(255,255,255,0.75)\",\n    source: require(\"./loader.json\"),\n    animationStyle: styles.lottie,\n    speed: 1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 18\n    }\n  }) : React.createElement(React.Fragment, null, Array.isArray(staffList) && staffList.length !== 0 && React.createElement(Text, {\n    style: styles.header,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 29\n    }\n  }, \"Little Scribblers Staff Directory\"), !Array.isArray(staffList) || staffList.length === 0 && React.createElement(Text, {\n    style: {\n      alignSelf: \"center\",\n      fontFamily: \"mainFont\",\n      fontSize: 20,\n      marginBottom: \"1%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }, \"There are no staff in the directory.\"), React.createElement(View, {\n    style: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignSelf: \"center\",\n      justifyContent: \"space-between\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 3\n    }\n  }, React.createElement(ButtonAll, {\n    handlePress: function handlePress() {\n      return props.navigation.navigate(\"NewStaffForm\");\n    },\n    title: \"Add Staff\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 1\n    }\n  }), Array.isArray(staffList) && staffList.length !== 0 && !removing && React.createElement(ButtonAll, {\n    color: \"red\",\n    handlePress: function handlePress() {\n      return setRemoving(true);\n    },\n    title: \"Remove Staff\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 2\n    }\n  }), Array.isArray(staffList) && staffList.length !== 0 && removing && React.createElement(ButtonAll, {\n    color: \"red\",\n    handlePress: function handlePress() {\n      setRemoving(false);\n    },\n    title: \"Stop Removing\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  })), Array.isArray(staffList) && staffList.length !== 0 ? React.createElement(View, {\n    style: styles.infoContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 9\n    }\n  }, staffToText()) : null));\n};\nvar styles = StyleSheet.create({\n  container: {\n    padding: \"5%\",\n    flex: 1,\n    justifyContent: \"space-evenly\",\n    backgroundColor: \"#FAFAFA\"\n  },\n  infoContainer: {\n    flex: 1\n  },\n  staffInfoContainer: {\n    borderRadius: 5,\n    backgroundColor: \"white\",\n    justifyContent: \"space-between\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    width: \"100%\",\n    padding: \"2%\",\n    elevation: 5\n  },\n  text: {\n    fontFamily: \"mainFont\",\n    fontSize: 20,\n    marginBottom: \"1%\"\n  },\n  header: {\n    alignSelf: \"center\",\n    fontFamily: \"mainFont\",\n    fontSize: 24,\n    marginBottom: \"3%\"\n  },\n  lottie: {\n    width: 100,\n    height: 100\n  },\n  inputContainer: {\n    flex: 2,\n    width: \"100%\",\n    marginTop: \"5%\"\n  },\n  button: {\n    width: \"30%\",\n    backgroundColor: \"white\",\n    fontFamily: \"mainFont\",\n    borderRadius: 20,\n    marginTop: \"2%\",\n    fontSize: 20,\n    color: \"black\",\n    justifyContent: \"center\",\n    textAlign: \"center\"\n  },\n  label: {\n    margin: 8\n  },\n  boldText: {\n    fontWeight: \"bold\",\n    fontFamily: \"mainFont\",\n    fontSize: 22,\n    marginBottom: \"1%\"\n  },\n  emojiContainer: {\n    flexDirection: \"row\"\n  }\n});","map":{"version":3,"sources":["/Users/clairelivingstone/Desktop/ratio-tracker/client/StaffDirectory/DiplomaInfo.js"],"names":["React","useState","useEffect","UserService","FontAwesomeIcon","faMinusCircle","ButtonAll","AnimatedLoader","useIsFocused","AsyncStorage","DiplomaInfo","props","staffOnDuty","setStaffOnDuty","setResetting","removing","setRemoving","staffList","setStaffList","loading","setLoading","isFocused","storeData","value","jsonValue","JSON","stringify","setItem","alert","sorted","staffObjectList","sort","a","b","x","firstname","toLowerCase","y","lastname","route","params","cancelled","getAllStaff","then","res","data","catch","err","console","log","handleRemove","staffId","newStaffOnDuty","filter","staff","staffid","deleteStaff","Array","isArray","length","staffToText","styles","container","map","index","display","flexDirection","justifyContent","staffInfoContainer","boldText","text","hasdiploma","alignItems","paddingLeft","require","lottie","header","alignSelf","fontFamily","fontSize","marginBottom","navigation","navigate","infoContainer","StyleSheet","create","padding","flex","backgroundColor","borderRadius","width","elevation","height","inputContainer","marginTop","button","color","textAlign","label","margin","fontWeight","emojiContainer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport UserService from \"../services/UserService\"\nimport {\n  View,\n  StyleSheet,\n  Text,\n  TouchableOpacity,\n} from \"react-native\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-native-fontawesome\";\nimport { faMinusCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { ButtonAll } from \"../ButtonAll\";\nimport AnimatedLoader from \"react-native-animated-loader\";\nimport { useIsFocused } from \"@react-navigation/native\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nexport const DiplomaInfo = (props) => {\n  const staffOnDuty = props.staffOnDuty;\n  const setStaffOnDuty = props.setStaffOnDuty;\n  const setResetting = props.setResetting;\n\n  const [removing, setRemoving] = useState(false);\n  const [staffList, setStaffList] = useState();\n  const [loading, setLoading] = useState(false)\n  const isFocused = useIsFocused();\n\n  const storeData = async (value) => {\n    try {\n      const jsonValue = JSON.stringify(value);\n      await AsyncStorage.setItem(\"staffPicked\", jsonValue)\n      return value;\n    } catch (e) {\n      alert(\"Error saving, try again\");\n    }\n  };\n\n\n  const sorted = (staffObjectList) => {\n    staffObjectList.sort((a, b) => {\n      let x = a.firstname[0].toLowerCase();\n      let y = b.lastname[0].toLowerCase();\n      if (x < y) {\n        return -1;\n      }\n      if (x > y) {\n        return 1;\n      }\n      return 0;\n    });\n    return staffObjectList;\n  };\n                                                                                                                                                                                                                                                                                                                                                                                                     \n  useEffect(() => {\n    if (props.route && props.route.params && props.route.params.cancelled) {\n      return;\n    }\n    if (isFocused) { \n      setLoading(true);\n      UserService.getAllStaff().then(res=>{\n        setStaffList(res.data)\n        setLoading(false)\n      }).catch(err=>{setLoading(false); console.log(err)})\n    }\n\n  }, [isFocused]);\n\n  const handleRemove = async (staffId) => {\n    setLoading(true);\n    let newStaffOnDuty = staffOnDuty.filter(staff => staff.staffid !== staffId)\n    setStaffOnDuty(newStaffOnDuty)\n    // do the async storage \n    storeData(newStaffOnDuty).then(res=>{\n    UserService.deleteStaff(staffId).then(res => {\n      UserService.getAllStaff().then(res=>{\n        setStaffList(res.data)\n        setLoading(false)\n      }).catch(err=>{setLoading(false); console.log(err)})\n    }).catch(err=>{setLoading(false); console.log(err)})\n\n\n  }).catch(err=>{setLoading(false); console.log(err)})\n\n\n\n\n\n  }\n\n  useEffect(() => {\n    if (!Array.isArray(staffList) || staffList.length === 0) {\n      setRemoving(false);\n    }\n  }, [staffList]);\n\n\n  const staffToText = () => {\n    return (\n    <View style={styles.container}>        \n\n    {sorted(staffList).map((staff, index) => (\n      <View key={index} style={{display:\"flex\", flexDirection: \"row\", justifyContent: \"space-around\"}}>\n      <View style={styles.staffInfoContainer} key={index}>\n        <Text style={styles.boldText}>\n          {\" \"}\n          {staff.firstname} {staff.lastname} \n        </Text>\n        <Text style={styles.text}>\n        {staff.hasdiploma ? \"Diploma/Working Towards\" : \"No diploma\"}\n\n        </Text>\n        \n      </View>\n      {removing ? (\n        <View style={{alignItems: \"center\", paddingLeft: \"5%\", display: \"flex\", justifyContent: \"space-around\"}}>\n          \n        <TouchableOpacity onPress={() => handleRemove(staff.staffid)}>\n          <FontAwesomeIcon\n            icon={faMinusCircle}\n            size={20}\n            color={\"red\"}\n          ></FontAwesomeIcon>\n        </TouchableOpacity>\n        </View>\n      ) : null}\n                </View>\n\n      \n    ))}\n\n    </View> )\n  };\n\n  return (\n    <View style={styles.container}>\n      {loading ? <AnimatedLoader\n        visible={true}\n        overlayColor=\"rgba(255,255,255,0.75)\"\n        source={require(\"./loader.json\")}\n        animationStyle={styles.lottie}\n        speed={1} /> \n\n        :\n       <>\n      \n\n{Array.isArray(staffList) &&\n  staffList.length !== 0 && <Text style={styles.header}>Little Scribblers Staff Directory</Text> }\n\n        \n{!Array.isArray(staffList) ||\n        (staffList.length === 0 && (\n          <Text style={{alignSelf:\"center\", \n          fontFamily: \"mainFont\",\n          fontSize: 20,\n          marginBottom: \"1%\"}}>There are no staff in the directory.</Text>\n        ))}\n\n\n  <View style={{display:\"flex\", flexDirection: \"row\", alignSelf: \"center\", justifyContent: \"space-between\"}}>\n\n<ButtonAll handlePress={() => props.navigation.navigate(\"NewStaffForm\")} title=\"Add Staff\" />\n{Array.isArray(staffList) && staffList.length !== 0 && !removing &&\n <ButtonAll color=\"red\" handlePress={() => setRemoving(true)} title=\"Remove Staff\" />}\n\n{Array.isArray(staffList) &&\n        staffList.length !== 0 &&\n        removing && (\n          <ButtonAll\n            color=\"red\" \n            handlePress={() => {\n              setRemoving(false);\n            }}\n            title=\"Stop Removing\"\n          />\n        )}\n\n</View>\n\n\n\n\n\n\n\n      {Array.isArray(staffList) && staffList.length !== 0\n        ? \n        <View style={styles.infoContainer}>{staffToText()}</View>\n      : null}\n           </>\n      }\n    \n      \n     </View>\n     \n\n  )\n  \n    };\n\nconst styles = StyleSheet.create({\n  container: {\n    padding: \"5%\",\n    flex: 1,\n    justifyContent: \"space-evenly\",\n    backgroundColor: \"#FAFAFA\",\n  },\n  infoContainer: {\n    flex: 1,\n  },\n  staffInfoContainer: {\n    borderRadius: 5,\n    backgroundColor: \"white\",\n    justifyContent: \"space-between\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    width: \"100%\",\n    padding: \"2%\",\n    elevation: 5,\n  },\n  text: {\n    fontFamily: \"mainFont\",\n    fontSize: 20,\n    marginBottom: \"1%\",\n  },\n  header: {\n    alignSelf: \"center\",\n    fontFamily: \"mainFont\",\n    fontSize: 24,\n    marginBottom: \"3%\",\n  },\n  lottie: {\n    width: 100,\n    height: 100\n  },\n  inputContainer: {\n    flex: 2,\n    width: \"100%\",\n    marginTop: \"5%\",\n  },\n  button: {\n    width: \"30%\",\n    backgroundColor: \"white\",\n    fontFamily: \"mainFont\",\n    borderRadius: 20,\n    marginTop: \"2%\",\n    fontSize: 20,\n    color: \"black\",\n    justifyContent: \"center\",\n    textAlign: \"center\",\n  },\n  label: {\n    margin: 8,\n  },\n  boldText: {\n    fontWeight: \"bold\",\n    fontFamily: \"mainFont\",\n    fontSize: 22,\n    marginBottom: \"1%\",\n  },\n  emojiContainer: {\n    flexDirection: \"row\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}